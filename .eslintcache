[{"M:\\Media Files\\Other\\course-project\\code\\callmaster-frontend\\src\\App.tsx":"1","M:\\Media Files\\Other\\course-project\\code\\callmaster-frontend\\src\\reportWebVitals.ts":"2","M:\\Media Files\\Other\\course-project\\code\\callmaster-frontend\\src\\index.tsx":"3","M:\\Media Files\\Other\\course-project\\code\\callmaster-frontend\\src\\pages\\auth\\Signup.tsx":"4","M:\\Media Files\\Other\\course-project\\code\\callmaster-frontend\\src\\pages\\Main\\index.tsx":"5","M:\\Media Files\\Other\\course-project\\code\\callmaster-frontend\\src\\components\\Chat\\index.tsx":"6","M:\\Media Files\\Other\\course-project\\code\\callmaster-frontend\\src\\components\\Chat\\Side.tsx":"7","M:\\Media Files\\Other\\course-project\\code\\callmaster-frontend\\src\\components\\Chat\\Body.tsx":"8","M:\\Media Files\\Other\\course-project\\code\\callmaster-frontend\\src\\utils\\index.ts":"9","M:\\Media Files\\Other\\course-project\\code\\callmaster-frontend\\src\\routes\\index.tsx":"10","M:\\Media Files\\Other\\course-project\\code\\callmaster-frontend\\src\\routes\\Hoc.tsx":"11","M:\\Media Files\\Other\\course-project\\code\\callmaster-frontend\\src\\pages\\auth\\Login.tsx":"12","M:\\Media Files\\Other\\course-project\\code\\callmaster-frontend\\src\\components\\FieldWithValidation.tsx":"13","M:\\Media Files\\Other\\course-project\\code\\callmaster-frontend\\src\\utils\\apiClient.ts":"14","M:\\Media Files\\Other\\course-project\\code\\callmaster-frontend\\src\\components\\UploadFile.tsx":"15"},{"size":955,"mtime":1606752924263,"results":"16","hashOfConfig":"17"},{"size":425,"mtime":1606394056262,"results":"18","hashOfConfig":"17"},{"size":497,"mtime":1606753052834,"results":"19","hashOfConfig":"17"},{"size":4252,"mtime":1606838084407,"results":"20","hashOfConfig":"17"},{"size":2106,"mtime":1606928111207,"results":"21","hashOfConfig":"17"},{"size":3868,"mtime":1606982001305,"results":"22","hashOfConfig":"17"},{"size":5078,"mtime":1606979108324,"results":"23","hashOfConfig":"17"},{"size":8528,"mtime":1606913770896,"results":"24","hashOfConfig":"17"},{"size":1817,"mtime":1606981996950,"results":"25","hashOfConfig":"17"},{"size":654,"mtime":1606751577268,"results":"26","hashOfConfig":"17"},{"size":666,"mtime":1606748274802,"results":"27","hashOfConfig":"17"},{"size":3725,"mtime":1606894656463,"results":"28","hashOfConfig":"17"},{"size":657,"mtime":1606739969629,"results":"29","hashOfConfig":"17"},{"size":598,"mtime":1606755555058,"results":"30","hashOfConfig":"17"},{"size":2024,"mtime":1606920802680,"results":"31","hashOfConfig":"17"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},"1josc0v",{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"37"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"40","messages":"41","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"44","messages":"45","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"46","messages":"47","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"48","messages":"49","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"56","messages":"57","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"65"},"M:\\Media Files\\Other\\course-project\\code\\callmaster-frontend\\src\\App.tsx",[],["66","67"],"M:\\Media Files\\Other\\course-project\\code\\callmaster-frontend\\src\\reportWebVitals.ts",[],["68","69"],"M:\\Media Files\\Other\\course-project\\code\\callmaster-frontend\\src\\index.tsx",[],"M:\\Media Files\\Other\\course-project\\code\\callmaster-frontend\\src\\pages\\auth\\Signup.tsx",["70"],"M:\\Media Files\\Other\\course-project\\code\\callmaster-frontend\\src\\pages\\Main\\index.tsx",[],"M:\\Media Files\\Other\\course-project\\code\\callmaster-frontend\\src\\components\\Chat\\index.tsx",["71","72","73","74","75","76","77"],"M:\\Media Files\\Other\\course-project\\code\\callmaster-frontend\\src\\components\\Chat\\Side.tsx",["78"],"M:\\Media Files\\Other\\course-project\\code\\callmaster-frontend\\src\\components\\Chat\\Body.tsx",["79"],"M:\\Media Files\\Other\\course-project\\code\\callmaster-frontend\\src\\utils\\index.ts",[],"M:\\Media Files\\Other\\course-project\\code\\callmaster-frontend\\src\\routes\\index.tsx",[],"M:\\Media Files\\Other\\course-project\\code\\callmaster-frontend\\src\\routes\\Hoc.tsx",[],"M:\\Media Files\\Other\\course-project\\code\\callmaster-frontend\\src\\pages\\auth\\Login.tsx",["80"],"M:\\Media Files\\Other\\course-project\\code\\callmaster-frontend\\src\\components\\FieldWithValidation.tsx",[],"M:\\Media Files\\Other\\course-project\\code\\callmaster-frontend\\src\\utils\\apiClient.ts",[],["81","82"],"M:\\Media Files\\Other\\course-project\\code\\callmaster-frontend\\src\\components\\UploadFile.tsx",["83","84"],"import React, { useMemo, useState } from 'react';\r\nimport { Modal, Upload } from 'antd';\r\nimport { PlusOutlined } from '@ant-design/icons';\r\nimport axios from 'axios';\r\n\r\nimport { getToken } from 'utils';\r\n\r\nimport { RcCustomRequestOptions } from 'antd/lib/upload/interface';\r\nimport { IUpload } from 'types';\r\n\r\ntype Props = {\r\n  isVisible: boolean;\r\n  onClose: () => void;\r\n  onOk: (uploads: IUpload[]) => void;\r\n};\r\n\r\nconst UploadFile: React.FC<Props> = ({ isVisible, onClose, onOk }) => {\r\n  const [uploads, setUploads] = useState<IUpload[]>([]);\r\n\r\n  const photos = useMemo(() => {\r\n    return uploads.map((photo) => ({\r\n      uid: photo._id,\r\n      name: photo.filename,\r\n      size: 50,\r\n      type: photo.mimetype as string,\r\n      url: photo.path,\r\n    }));\r\n  }, [uploads]);\r\n\r\n  const uploadFile = async (fileInfo: RcCustomRequestOptions) => {\r\n    console.log('args', fileInfo);\r\n    const token = getToken();\r\n\r\n    const file = fileInfo.file;\r\n    const data = new FormData();\r\n    data.append('file', file);\r\n\r\n    try {\r\n      const response = (\r\n        await axios({\r\n          method: 'post',\r\n          url: process.env.REACT_APP_FILE_URL,\r\n          data,\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        })\r\n      ).data[0];\r\n\r\n      setUploads((v) => [...v, response]);\r\n      console.log('resp', response);\r\n    } catch (e) {\r\n      console.error('error in uploading', e);\r\n    }\r\n  };\r\n\r\n  const onCloseModal = () => {\r\n    setUploads([]);\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      visible={isVisible}\r\n      onCancel={onCloseModal}\r\n      onOk={() => onOk(uploads)}\r\n      centered\r\n    >\r\n      <Upload\r\n        customRequest={uploadFile}\r\n        listType=\"picture-card\"\r\n        fileList={photos}\r\n      >\r\n        {uploads.length >= 4 ? null : (\r\n          <div>\r\n            <PlusOutlined />\r\n            <div style={{ marginTop: 8 }}>Загрузить</div>\r\n          </div>\r\n        )}\r\n      </Upload>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default UploadFile;\r\n",{"ruleId":"85","replacedBy":"86"},{"ruleId":"87","replacedBy":"88"},{"ruleId":"85","replacedBy":"89"},{"ruleId":"87","replacedBy":"90"},{"ruleId":"91","severity":1,"message":"92","line":35,"column":7,"nodeType":"93","messageId":"94","endLine":35,"endColumn":18},{"ruleId":"95","severity":1,"message":"96","line":7,"column":17,"nodeType":"97","messageId":"98","endLine":7,"endColumn":25},{"ruleId":"99","severity":1,"message":"96","line":7,"column":17,"nodeType":"97","messageId":"98","endLine":7,"endColumn":25},{"ruleId":"91","severity":1,"message":"92","line":79,"column":9,"nodeType":"93","messageId":"94","endLine":79,"endColumn":20},{"ruleId":"91","severity":1,"message":"92","line":98,"column":7,"nodeType":"93","messageId":"94","endLine":98,"endColumn":18},{"ruleId":"91","severity":1,"message":"92","line":102,"column":7,"nodeType":"93","messageId":"94","endLine":102,"endColumn":18},{"ruleId":"100","severity":1,"message":"101","line":120,"column":6,"nodeType":"102","endLine":120,"endColumn":13,"suggestions":"103"},{"ruleId":"91","severity":1,"message":"92","line":132,"column":34,"nodeType":"93","messageId":"94","endLine":132,"endColumn":45},{"ruleId":"91","severity":1,"message":"92","line":92,"column":7,"nodeType":"93","messageId":"94","endLine":92,"endColumn":18},{"ruleId":"91","severity":1,"message":"92","line":152,"column":9,"nodeType":"93","messageId":"94","endLine":152,"endColumn":20},{"ruleId":"100","severity":1,"message":"104","line":36,"column":6,"nodeType":"102","endLine":36,"endColumn":8,"suggestions":"105"},{"ruleId":"85","replacedBy":"106"},{"ruleId":"87","replacedBy":"107"},{"ruleId":"91","severity":1,"message":"92","line":31,"column":5,"nodeType":"93","messageId":"94","endLine":31,"endColumn":16},{"ruleId":"91","severity":1,"message":"92","line":49,"column":7,"nodeType":"93","messageId":"94","endLine":49,"endColumn":18},"no-native-reassign",["108"],"no-negated-in-lhs",["109"],["108"],["109"],"no-console","Unexpected console statement.","MemberExpression","unexpected","no-unused-vars","'IMessage' is defined but never used.","Identifier","unusedVar","@typescript-eslint/no-unused-vars","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'activeChat._id'. Either include it or remove the dependency array.","ArrayExpression",["110"],"React Hook useEffect has a missing dependency: 'history'. Either include it or remove the dependency array.",["111"],["108"],["109"],"no-global-assign","no-unsafe-negation",{"desc":"112","fix":"113"},{"desc":"114","fix":"115"},"Update the dependencies array to be: [activeChat._id, chats]",{"range":"116","text":"117"},"Update the dependencies array to be: [history]",{"range":"118","text":"119"},[3513,3520],"[activeChat._id, chats]",[1019,1021],"[history]"]